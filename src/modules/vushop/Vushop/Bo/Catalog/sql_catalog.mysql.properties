statement.class=Ddth_Dao_Mysql_MysqlSqlStatement

_tbl.category=vushop_category
_col.cat_id=cid AS cat_id
_col.cat_id.where=cid=${cat_id}
_cols.category.select=cid AS cat_id, cposition AS cat_position, cparent_id AS cat_parent_id, ctitle AS cat_title, cdesc AS cat_desc, cimage_id AS cat_image_id
_cols.category.update=cposition=${cat_position}, cparent_id=${cat_parent_id}, ctitle=${cat_title}, cdesc=${cat_desc}, cimage_id=${cat_image_id}
_cols.category.insert=(cposition, cparent_id, ctitle, cdesc, cimage_id) VALUES (${cat_position}, ${cat_parent_id}, ${cat_title}, ${cat_desc}, ${cat_image_id})

sql.getAllCategoryIds=SELECT {$_col.cat_id} FROM {$_tbl.category}
sql.countNumCategories=SELECT count(cid) FROM {$_tbl.category}
sql.createCategory=INSERT INTO {$_tbl.category} {$_cols.category.insert}
sql.deleteCategory=DELETE FROM {$_tbl.category} WHERE {$_col.cat_id.where}
sql.getCategoryById=SELECT {$_cols.category.select} FROM {$_tbl.category} WHERE {$_col.cat_id.where}
sql.getCategoryChildren=SELECT {$_col.cat_id} FROM {$_tbl.category} WHERE cparent_id=${cat_parent_id} ORDER BY cposition, cid
sql.getCategoryTree=SELECT {$_col.cat_id} FROM {$_tbl.category} WHERE cparent_id IS NULL ORDER BY cposition
sql.updateCategory=UPDATE {$_tbl.category} SET {$_cols.category.update} WHERE {$_col.cat_id.where}

_tbl.item=vushop_item
_col.itemId=iid AS itemId
_col.itemId.where=iid=${itemId}
_col.shop.item.where=iowner_id=${ownerId}
_cols.item.select=iid AS itemId, iactive AS itemActive, icategory_id AS itemCategoryId, ititle AS itemTitle, idesc AS itemDescription, ivendor AS itemVendor, icode AS itemCode, iprice AS itemPrice, iold_price AS itemOldPrice, istock AS itemStock, iimage_id AS itemImageId, ihot_item AS itemHotItem, inew_item AS itemNewItem, itimestamp AS itemTimestamp
_cols.item.update=iactive=${itemActive}, icategory_id=${itemCategoryId}, ititle=${itemTitle}, idesc=${itemDescription}, ivendor=${itemVendor}, icode=${itemCode}, iprice=${itemPrice}, iold_price=${itemOldPrice}, istock=${itemStock}, iimage_id=${itemImageId}, ihot_item=${itemHotItem}, inew_item=${itemNewItem}
_cols.item.insert=(iactive, icategory_id, ititle, idesc, ivendor, icode, itimestamp, iprice, iold_price, istock, iimage_id, ihot_item, inew_item) VALUES (1, ${itemCategoryId}, ${itemTitle}, ${itemDescription}, ${itemVendor}, ${itemCode}, ${itemTimestamp}, ${itemPrice}, ${itemOldPrice}, ${itemStock}, ${itemImageId}, ${itemHotItem}, ${itemNewItem})

sql.countNumItems=SELECT count(iid) FROM {$_tbl.item} WHERE iactive=1
sql.countNumItems.featuredOnly=SELECT count(iid) FROM {$_tbl.item} WHERE iactive=1 AND (inew_item=1 OR ihot_item=1)
sql.countNumItemsForCategory=SELECT count(iid) FROM {$_tbl.item} WHERE iactive=1 AND icategory_id IN (${categoryIds})
sql.countNumItemsForCategory.featuredOnly=SELECT count(iid) FROM {$_tbl.item} WHERE iactive=1 AND (inew_item=1 OR ihot_item=1) AND icategory_id IN (${categoryIds})
sql.createItem=INSERT INTO {$_tbl.item} {$_cols.item.insert}
sql.getItemJustCreated=SELECT {$_col.itemId} FROM {$_tbl.item} WHERE itimestamp=${itemTimestamp} AND ititle=${itemTitle}
sql.deleteItem=DELETE FROM {$_tbl.item} WHERE {$_col.itemId.where}
sql.getAllItems=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getAllItems.featuredOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND (inew_item=1 OR ihot_item=1) ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getAllItems.featuredHotOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND ihot_item=1 ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getAllItems.featuredNewOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND inew_item=1 ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getFeatureItems=SELECT {$_col.itemId} FROM {$_tbl.item} WHERE iactive=1 AND (ihot_item=1 OR inew_item=1) ORDER BY itimestamp
sql.getItemById=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE {$_col.itemId.where} AND iactive=1
sql.getItemsForCategory=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND icategory_id IN (${categoryIds}) ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getItemsForCategory.featuredOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND (inew_item=1 OR ihot_item=1) AND icategory_id IN (${categoryIds}) ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.updateItem=UPDATE {$_tbl.item} SET {$_cols.item.update} WHERE {$_col.itemId.where}
sql.deleteIndexItem=DELETE FROM vushop_tag WHERE titem_id=${itemId}
sql.updateIndexItem=INSERT INTO vushop_tag (titem_id, ttag, ttype) VALUES (${itemId}, ${tag}, ${type})
sql.searchItemsCategory=SELECT DISTINCT I.iid AS itemId FROM vushop_tag T, vushop_item I WHERE T.titem_id=I.iid AND I.iactive=1 AND T.ttype IN (${searchTypes}) AND T.ttag IN (${tags}) AND I.icategory_id IN (${categoryIds}) ORDER BY I.itimestamp LIMIT ${startOffset},${pageSize}
sql.searchItemsNoCategory=SELECT DISTINCT I.iid AS itemId FROM vushop_tag T, vushop_item I WHERE T.titem_id=I.iid AND I.iactive=1 AND T.ttype IN (${searchTypes}) AND T.ttag IN (${tags}) ORDER BY I.itimestamp LIMIT ${startOffset},${pageSize}
sql.countSearchItemsCategory=SELECT count(DISTINCT I.iid) FROM vushop_tag T, vushop_item I WHERE T.titem_id=I.iid AND I.iactive=1 AND T.ttype IN (${searchTypes}) AND T.ttag IN (${tags}) AND I.icategory_id IN (${categoryIds})
sql.countSearchItemsNoCategory=SELECT count(DISTINCT I.iid) FROM vushop_tag T, vushop_item I WHERE T.titem_id=I.iid AND I.iactive=1 AND T.ttype IN (${searchTypes}) AND T.ttag IN (${tags})

sql.getItemsForShopCategory=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND icategory_id IN (${categoryIds}) AND {$_col.shop.item.where} ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getItemsForShopCategory.featuredHotOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND ihot_item=1 AND icategory_id IN (${categoryIds}) AND {$_col.shop.item.where} ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getItemsForShopCategory.featuredNewOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND inew_item=1 AND icategory_id IN (${categoryIds}) AND {$_col.shop.item.where} ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
sql.getItemsForShopCategory,featuredOnly=SELECT {$_cols.item.select} FROM {$_tbl.item} WHERE iactive=1 AND (ihot_item=1 OR inew_item=1) AND icategory_id IN (${categoryIds}) AND {$_col.shop.item.where} ORDER BY ${sortingField} ${sorting} LIMIT ${startOffset},${pageSize}
